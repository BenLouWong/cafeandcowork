extends layout

block body
  include mixins

  .place
    include header

    h2
      a(href=place.url)
        span= place.name
      if place.closed
        span.closed Permanently Closed
      else if !isOpen24Hours(city, place)
        if isClosedToday(city, place)
          span.closed(data-nosnippet) Closed Today
        else if isOpeningSoon(city, place)
          span.hours-warning(data-nosnippet) Opens at #{getOpeningTime(city, place)}
        else if isClosingSoon(city, place)
          span.hours-warning(data-nosnippet) Closing Soon (#{getClosingTime(city, place)})
        else if isClosedNow(city, place)
          span.closed(data-nosnippet) Closed Now
      
    .info
      if place.area
        if place.areaUrl
          span #{place.type} in #[a(href=place.areaUrl) #{place.area}], #[a.city(href=place.cityUrl)= city.name]
        else
          span #{place.type} in #{place.area}, #[a.city(href=place.cityUrl)= city.name]
      else
        span #{place.type} in #[a.city(href=place.cityUrl)= city.name]

    if place.images
      .images
        each image of place.images
          img(src=image data-action="zoom")

    .content!= place.content

    .buttons
      a.button.maps(href=place.google_maps target="_blank").umami--click--place-button-google-maps
        i.fa.fa-map
        span Google Maps
      if place.facebook
        a.button.facebook(href=place.facebook target="_blank").umami--click--place-button-facebook
          i.fa.fa-facebook
          span Facebook
      if place.instagram
        a.button.instagram(href=place.instagram target="_blank").umami--click--place-button-instagram
          i.fa.fa-instagram
          span Instagram
      if place.website
        a.button.website(href=place.website target="_blank").umami--click--place-button-website
          i.fa.fa-external-link
          span Website
      if place.telephone
        a.button.telephone(href=`tel:${place.telephone}`).umami--click--place-button-telephone
          i.fa.fa-phone
          span Call
      //-a.button(href=`${github}/tree/master/${file}` target="_blank")
        i.fa.fa-pencil
        span Edit

    .attributes
      dl
        dt #[span.icon ⭐️] Overall
        dd: +score(place)
        dt #[span.icon 💻] WiFi
        dd
          +attribute(place.wifi, true)
          if place.speed
            span.speed (#{place.speed} Mb/s)
        dt #[span.icon 🔌] Power
        dd: +attribute(place.power, true)
        dt #[span.icon 🪑] Vacancy
        dd: +attribute(place.vacancy, true)
        dt #[span.icon 🛋] Comfort
        dd: +attribute(place.comfort, true)
        dt #[span.icon 🗣] Quiet
        dd: +attribute(place.quiet, true)
        dt #[span.icon ☕️] Drinks
        dd: +attribute(place.drinks, true)
        dt #[span.icon 🍔] Food
        dd: +attribute(place.food, true)
        dt #[span.icon 💰] Price
        dd: +attribute(place.price, true)
        dt #[span.icon 🌄] View
        dd: +attribute(place.view, true)
        dt #[span.icon 🚽] Toilets
        dd: +attribute(place.toilets, true)
        dt #[span.icon 🔊] Music
        dd: +attribute(place.music, true)
        dt #[span.icon 🚬] Smoking
        dd: +attribute(place.smoking, true)
        dt #[span.icon 🧍‍♂️] Standing Tables
        dd: +attribute(place.standing_tables, true)
        dt #[span.icon 🌳] Outdoor Seating
        dd: +attribute(place.outdoor_seating, true)
        dt #[span.icon 💵] Cash Only
        dd: +attribute(place.cash_only, true)
        dt #[span.icon 🐶] Animals
        dd: +attribute(place.animals, true)
        dt #[span.icon 🥛] Lactose Free Milk
        dd: +attribute(place.lactose_free_milk, true)
        if place.station
          dt #[span.icon 🚇] Station
          if place.stationUrl
            dd: a(href=place.stationUrl)= place.station
          else
            dd= place.station
        if place.opens && place.closes
          dt #[span.icon ⏰] Hours
          dd #{place.opens} to #{place.closes}
        if place.hours
          dt #[span.icon ⏰] Hours
          dd: +hours(city, place)
      dl
        dt Type
        dd #{place.type}
        dt Area
        if place.areaUrl
          dd: a(href=place.areaUrl)= place.area
        else
          dd= place.area
        if place.address
          dt Address
          dd: a(href=place.google_maps target="_blank").umami--click--place-link-address= place.address
        if place.facebook
          dt Facebook
          dd: a(href=place.facebook target="_blank").umami--click--place-link-facebook= formatUrl(place.facebook)
        if place.instagram
          dt Instagram
          dd: a(href=place.instagram target="_blank").umami--click--place-link-instagram= formatUrl(place.instagram)
        if place.website
          dt Website
          dd: a(href=place.website target="_blank").umami--click--place-link-website= formatUrl(place.website)
        if place.telephone
          dt Telephone
          dd: a(href=`tel:${place.telephone}` target="_blank").umami--click--place-link-telephone= place.telephone
        if place.updated || place.added
          dt Updated
          dd #{formatDate(place.updated || place.added)}
        if place.contributors && place.contributors.length > 0
          dt Contributors
          dd
            each contributor in place.contributors
              div
                a(href=contributor target="_blank").umami--click--place-link-contributor= formatUrl(contributor)

    .map
      #map

  script.
    CafeAndCowork.Place(!{JSON.stringify(place)});
