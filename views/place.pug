extends layout

block head
  script(type="application/ld+json").
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "#{city.name}",
        "item": "#{site.url}#{city.url}"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "#{name}",
        "item": "#{site.url}#{url}"
      }]
    }

block body
  include mixins

  .place
    include header

    h2
      a(href=place.url)
        span= place.name
      if place.closed
        span.closed Permanently Closed
      else if isClosedToday(city, place)
        span.closed Closed Today
      else if isClosedNow(city, place)
        span.closed Closed Now
      
    .info
      if place.area
        a.city(href=place.cityUrl) #{city.name}
        if place.areaUrl
          span · #{place.type} in #[a(href=place.areaUrl) #{place.area}]
        else
          span · #{place.type} in #{place.area}
      else
        span #{place.type} in #[a(href=place.cityUrl)= city.name]

    if images
      .images
        each image of images
          img(src=`${url}${image}` data-action="zoom")

    .content!= place.content

    if place.author
      .author Submitted by: #[a.author(href=place.author target="_blank")= formatUrl(place.author)]

    .buttons
      a.button.maps(href=place.google_maps target="_blank")
        i.fa.fa-map
        span Google Maps
      if place.facebook
        a.button.facebook(href=place.facebook target="_blank")
          i.fa.fa-facebook
          span Facebook
      if place.instagram
        a.button.instagram(href=place.instagram target="_blank")
          i.fa.fa-instagram
          span Instagram
      if place.website
        a.button.website(href=place.website target="_blank")
          i.fa.fa-external-link
          span Website
      if place.telephone
        a.button.telephone(href=`tel:${place.telephone}`)
          i.fa.fa-phone
          span Call
      //-a.button(href=`${github}/tree/master/${file}` target="_blank")
        i.fa.fa-pencil
        span Edit

    .attributes
      dl
        dt #[span.icon ⭐️] Overall
        dd: +score(place)
        dt #[span.icon 💻] WiFi
        dd
          +attribute(place.wifi, true)
          if speed
            span.speed (#{speed} Mb/s)
        dt #[span.icon 🔌] Power
        dd: +attribute(place.power, true)
        dt #[span.icon 🪑] Vacancy
        dd: +attribute(place.vacancy, true)
        dt #[span.icon 🛋] Comfort
        dd: +attribute(place.comfort, true)
        dt #[span.icon 🗣] Quiet
        dd: +attribute(place.quiet, true)
        dt #[span.icon ☕️] Drinks
        dd: +attribute(place.drinks, true)
        dt #[span.icon 🍔] Food
        dd: +attribute(place.food, true)
        dt #[span.icon 💰] Price
        dd: +attribute(place.price, true)
        dt #[span.icon 🌄] View
        dd: +attribute(place.view, true)
        dt #[span.icon 🚽] Toilets
        dd: +attribute(place.toilets, true)
        dt #[span.icon 🔊] Music
        dd: +attribute(place.music, true)
        dt #[span.icon 🚬] Smoking
        dd: +attribute(place.smoking, true)
        dt #[span.icon 🧍‍♂️] Standing Tables
        dd: +attribute(place.standing_tables, true)
        dt #[span.icon 🌳] Outdoor Seating
        dd: +attribute(place.outdoor_seating, true)
        dt #[span.icon 💵] Cash Only
        dd: +attribute(place.cash_only, true)
        dt #[span.icon 🐶] Animals
        dd: +attribute(place.animals, true)
        if place.station
          dt #[span.icon 🚇] Station
          if place.stationUrl
            dd: a(href=place.stationUrl)= place.station
          else
            dd= place.station
        if place.opens && place.closes
          dt #[span.icon ⏰] Hours
          dd #{place.opens} to #{place.closes}
        if place.hours
          dt #[span.icon ⏰] Hours
          dd: +hours(place.hours)
      dl
        dt Type
        dd #{place.type}
        dt Area
        if place.areaUrl
          dd: a(href=place.areaUrl)= place.area
        else
          dd= place.area
        if place.address
          dt Address
          dd: a(href=place.google_maps)= place.address
        if place.facebook
          dt Facebook
          dd: a(href=place.facebook)= formatUrl(place.facebook)
        if place.instagram
          dt Instagram
          dd: a(href=place.instagram)= formatUrl(place.instagram)
        if place.website
          dt Website
          dd: a(href=place.website)= formatUrl(place.website)
        if place.telephone
          dt Telephone
          dd: a(href=`tel:${place.telephone}`)= place.telephone
        if place.updated || place.added
          dt Updated
          dd #{formatDate(place.updated || place.added)}
    .map
      #map

  script.
    CafeAndCowork.Place(!{JSON.stringify(place)});
